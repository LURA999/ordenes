<app-navbar></app-navbar>

<div class="roboto-font">
<div class="container title-container">
    <div class="row">
        <div class="col-md-11 text-left">
            <h3>Detalle cliente {{idprospecto}}</h3>
        </div>
        <!-- <div class="col-md-1 text-left">
            <button class="btn btn-success">Editar</button>
        </div> -->
    </div>
</div>

<div class="container table-container">
    <h4>General:</h4>
    <div class="row">
        <div class="col-md-3">
            <label>Nombre:</label>
            <p ><b>{{cliente.nombre}}</b></p>
        </div>
        <div class="col-md-1">
            <label>Estado:</label>
            <p ><b>{{cliente.estado}}</b></p>
        </div>
        <div class="col-md-2">
            <label>Ciudad:</label>
            <p><b>{{cliente.ciudad}}</b></p>
        </div>
        <div class="col-md-2">
            <label>Cliente:</label>
            <p><b>{{cliente.colonia}}</b></p>
        </div>
        <div class="col-md-2">
            <label>Calle:</label>
            <p><b>{{cliente.calle}}</b></p>
        </div>
        <div class="col-md-1">
            <label>CP:</label>
            <p><b>{{cliente.cp}}</b></p>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3">
            <label>Coordenadas:</label>
            <p><b>{{cliente.coordenadas}}</b></p>
        </div>
        <div class="col-md-2">
            <label>Due√±o:</label>
            <p><b>{{cliente.propietario}}</b></p>
        </div>
        <div class="col-md-2">
            <label>Encargado r7:</label>
            <p><b>{{cliente.propietario}}</b></p>
        </div>
    </div>
</div>

<div class="container">
    <div class="row" style="margin-bottom: 10px;">
        <div class="col-md-10">
            <h4>Sucursales:</h4>
        </div>
        <div class="col-md-2">
            <button class="btn btn-success" data-toggle="modal" data-target="#nuevaSucursal">Nueva sucursal</button>
        </div>
    </div>
    <table class=" table table-striped table-container">
        <thead>
            <th scope="col">No</th>
            <th scope="col">nombre</th>
            <th scope="col">Opciones</th>
        </thead>
        <tbody *ngFor="let s of sucursales">
            <th scope="row">{{s.idsucursal}}</th>
            <th>{{s.nombre}}</th>
            <th scope="row"><button class="btn btn-primary" data-toggle="modal" data-target="#listaContactos" (click)="cargarContactos(s.idsucursal)" style="margin-right: 10px;">Contactos</button>
                            <button class="btn btn-success" (click)="cargarFormaContacto(s.idsucursal, s.nombre)" data-toggle="modal" data-target="#nuevoContacto" >Agregar</button>
            </th>

        </tbody>
    </table>
</div>

<!-- Lista de contactos -->
<div class="modal fade  bd-example-modal-lg" id="listaContactos" tabindex="-1" role="dialog" aria-labelledby="listaContactos" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-body">
          <table class=" table table-striped">
            <thead>
                <th scope="col" >No</th>
                <th scope="col" >Nombre</th>
                <th scope="col" >Telefono</th>
                <th scope="col" >Correo</th>
            </thead>
            <tbody *ngFor="let c of contactos">
                <th scope="row" >{{c.idcontacto}}</th>
                <th >{{c.Nombre}}</th>
                <th >{{c.Telefono}}</th>
                <th >{{c.correo}}</th>
            </tbody>
          </table>
          <div class="container text-center">
            <span class="text-danger" *ngIf="contactos.length == 0 " >Sin resultados</span>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
<!--Fin lista de contactos -->

<!-- Alta sucursal -->
<div class="modal fade  bd-example-modal-lg" id="nuevaSucursal" tabindex="-1" role="dialog" aria-labelledby="nuevaSucursal" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Nueva sucursal</h5>
          </div>
        <div class="modal-body">
            <form id="coordenadas" [formGroup]="nuevaSucursal" >
                <div class="row">
                    <div class="col-md-6">
                        <label>Nombre</label>
                        <input name="nombre" class="form-control" formControlName="nombre">
                    </div>
                    <div class="col-md-6">
                        <label>Calle</label>
                        <input name="calle" class="form-control" formControlName="calle">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label>Colonia</label>
                        <input name="colonia" class="form-control" formControlName="colonia">
                    </div>
                    <div class="col-md-6">
                        <label>Numero</label>
                        <input name="numero" class="form-control" formControlName="numero">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label>Ciudad</label>
                        <input name="ciudad" class="form-control" formControlName="ciudad">
                    </div>
                    <div class="col-md-6">
                        <label>Estado</label>
                        <input name="estado" class="form-control" formControlName="estado">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label>Codigo postal</label>
                        <input name="cp" class="form-control" formControlName="cp">
                    </div>
                    <div class="col-md-6">
                        <label>Razon social</label>
                        <input name="rsocial" class="form-control" formControlName="rsocial">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label>Servicio</label>
                        <input name="servicio" class="form-control" formControlName="servicio">
                    </div>
                    <div class="col-md-6">
                        <label>Coordenadas</label>
                        <input name="coordenadas" class="form-control" formControlName="coordenadas">
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
          <button  class="btn btn-success" (click)="onSubmit()">Guardar</button>
          <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
<!--Alta SucursalFIN -->


<!-- Alta sucursal -->
<div class="modal fade  bd-example-modal-lg" id="nuevoContacto" tabindex="-1" role="dialog" aria-labelledby="nuevoContacto" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Nuevo contacto para {{nombreSucursal}}</h5>
          </div>
        <div class="modal-body">
            <form id="coordenadas" [formGroup]="nuevoContacto" >
                <div class="row">
                    <div class="col-md-6">
                        <label>Nombre</label>
                        <input name="nombre" class="form-control" formControlName="nombre">
                    </div>
                    <div class="col-md-6">
                        <label>Telefono</label>
                        <input name="telefono" class="form-control" formControlName="telefono">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label>Extension</label>
                        <input name="ext" class="form-control" formControlName="extension">
                    </div>
                    <div class="col-md-6">
                        <label>Correo</label>
                        <input name="correo" class="form-control" formControlName="correo">
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
          <button  class="btn btn-success" (click)="crearContacto()">Guardar</button>
          <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
<!--Alta SucursalFIN -->
</div>
